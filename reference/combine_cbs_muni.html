<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Combine municipalities data frames from different sheets — combine_cbs_muni • il.cbs.muni</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Combine municipalities data frames from different sheets — combine_cbs_muni"><meta name="description" content="This function is a wrapper around read_cbs_muni() to help in combining data
for cities, local councils and regional councils.
From 2015 and earlier, the Israeli CBS publishes municipal data on different
sheets and formats for cities and local councils, and for regional councils.
This function enables the user to combine the two data frames for selected
columns. It is up to the user to take care of the specific match between specific
columns."><meta property="og:description" content="This function is a wrapper around read_cbs_muni() to help in combining data
for cities, local councils and regional councils.
From 2015 and earlier, the Israeli CBS publishes municipal data on different
sheets and formats for cities and local councils, and for regional councils.
This function enables the user to combine the two data frames for selected
columns. It is up to the user to take care of the specific match between specific
columns."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">il.cbs.muni</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/matanhakim/il.cbs.muni/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Combine municipalities data frames from different sheets</h1>
      <small class="dont-index">Source: <a href="https://github.com/matanhakim/il.cbs.muni/blob/master/R/combine_cbs_muni.R" class="external-link"><code>R/combine_cbs_muni.R</code></a></small>
      <div class="d-none name"><code>combine_cbs_muni.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is a wrapper around <code><a href="read_cbs_muni.html">read_cbs_muni()</a></code> to help in combining data
for cities, local councils and regional councils.
From 2015 and earlier, the Israeli CBS publishes municipal data on different
sheets and formats for cities and local councils, and for regional councils.
This function enables the user to combine the two data frames for selected
columns. It is up to the user to take care of the specific match between specific
columns.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">combine_cbs_muni</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  <span class="va">year</span>,</span>
<span>  <span class="va">cols_city</span>,</span>
<span>  <span class="va">cols_rc</span>,</span>
<span>  data_domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"physical"</span>, <span class="st">"budget"</span><span class="op">)</span>,</span>
<span>  col_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  col_names_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"city_lc"</span>, <span class="st">"rc"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>A character vector of length 1, denoting the local file path to the
municipal data file. A full list of available files by the CBS is at the
<a href="https://www.cbs.gov.il/he/publications/Pages/2019/%D7%94%D7%A8%D7%A9%D7%95%D7%99%D7%95%D7%AA-%D7%94%D7%9E%D7%A7%D7%95%D7%9E%D7%99%D7%95%D7%AA-%D7%91%D7%99%D7%A9%D7%A8%D7%90%D7%9C-%D7%A7%D7%95%D7%91%D7%A6%D7%99-%D7%A0%D7%AA%D7%95%D7%A0%D7%99%D7%9D-%D7%9C%D7%A2%D7%99%D7%91%D7%95%D7%93-1999-2017.aspx" class="external-link">relevant CBS page</a>.</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>A numeric vector of length 1 denoting which year the data file
pointed in <code>path</code> is for. Currently supporting 2003-2015, since before 2003 the
data structure is very different, and after 2015 the file is already combined.</p></dd>


<dt id="arg-cols-city">cols_city<a class="anchor" aria-label="anchor" href="#arg-cols-city"></a></dt>
<dd><p>&lt;<a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidy-select</a>&gt;
Columns to keep from the cities and local councils sheet.</p></dd>


<dt id="arg-cols-rc">cols_rc<a class="anchor" aria-label="anchor" href="#arg-cols-rc"></a></dt>
<dd><p>&lt;<a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidy-select</a>&gt;
Columns to keep from the regional councils sheet. Should be in the same order
of desired columns as in <code>cols_city</code>, since the columns are matched by order.</p></dd>


<dt id="arg-data-domain">data_domain<a class="anchor" aria-label="anchor" href="#arg-data-domain"></a></dt>
<dd><p>A character vector of length 1, one of
<code>c("physical", "budget")</code>. Every Excel municipal data file has a few different
data domains, most notably physical and population data, and budget data.</p></dd>


<dt id="arg-col-names">col_names<a class="anchor" aria-label="anchor" href="#arg-col-names"></a></dt>
<dd><p>A character vector containing the new column names of the
output tibble. If <code>NULL</code> then the tibble uses the original column names.
Must be the same length as the number of columns picked in <code>cols</code>. If not <code>NULL</code>,
overrides the choice in <code>col_names_from</code>.</p></dd>


<dt id="arg-col-names-from">col_names_from<a class="anchor" aria-label="anchor" href="#arg-col-names-from"></a></dt>
<dd><p>A character vector of length 1, one of
<code>c("city_lc", "rc")</code>. Denotes which column names should be kept - those from the
cities and local councils sheet, or those from the regional councils sheet.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with municipal data for a specific year, with the columns from
<code>cols_city</code> and <code>cols_rc</code> binded by rows and matched by order of columns. Every row is a
municipality and every column is a different variable for this municipality in
that year. Be advised all columns are of type character, so you need to parse
the data types yourself at will. Column names are merged from the relevant headers,
and only single whitespaces are kept. Rows with more than 90% empty cells (usually
rows with non-data notes) are removed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df_1</span> <span class="op">&lt;-</span> <span class="fu">combine_cbs_muni</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"2009.xls"</span>, package <span class="op">=</span> <span class="st">"il.cbs.muni"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  year <span class="op">=</span> <span class="fl">2009</span>,</span></span>
<span class="r-in"><span>  cols_city <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, <span class="fl">11</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cols_rc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_1</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Rows: 253</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Columns: 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `שם הרשות`                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "אום אל-פחם"<span style="color: #949494;">, </span>"אופקים"<span style="color: #949494;">, </span>"אור יהוד…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `סמל הרשות 2009`                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2710"<span style="color: #949494;">, </span>"0031"<span style="color: #949494;">, </span>"2400"<span style="color: #949494;">, </span>"1020"<span style="color: #949494;">, </span>"…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `מחוז 2009`                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "חיפה"<span style="color: #949494;">, </span>"הדרום"<span style="color: #949494;">, </span>"תל אביב"<span style="color: #949494;">, </span>"חיפה…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `מעמד מוניציפלי 2009`                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "עירייה"<span style="color: #949494;">, </span>"עירייה"<span style="color: #949494;">, </span>"עירייה"<span style="color: #949494;">, </span>"עי…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `מרחק מגבול מחוז תל אביב (ק"מ) 2004` <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "58.600000000000001"<span style="color: #949494;">, </span>"85.7999999…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `שנת קבלת מעמד מוניציפלי`            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1984"<span style="color: #949494;">, </span>"1995"<span style="color: #949494;">, </span>"1988"<span style="color: #949494;">, </span>"2001"<span style="color: #949494;">, </span>"…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `מספר חברי מועצה 2008`               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "16"<span style="color: #949494;">, </span>"13"<span style="color: #949494;">, </span>"17"<span style="color: #949494;">, </span>"15"<span style="color: #949494;">, </span>"17"<span style="color: #949494;">, </span>"13…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `סה"כ אוכלוסייה בסוף 2009 (אלפים)`   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "46.100000000000001"<span style="color: #949494;">, </span>"24"<span style="color: #949494;">, </span>"34.3…</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_2</span> <span class="op">&lt;-</span> <span class="fu">combine_cbs_muni</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"2009.xls"</span>, package <span class="op">=</span> <span class="st">"il.cbs.muni"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  year <span class="op">=</span> <span class="fl">2009</span>,</span></span>
<span class="r-in"><span>  cols_city <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cols_rc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data_domain <span class="op">=</span> <span class="st">"budget"</span>,</span></span>
<span class="r-in"><span>  col_names_from <span class="op">=</span> <span class="st">"rc"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_2</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Rows: 242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Columns: 12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `שם הרשות`                                                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `סמל הרשות 2009`                                                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `סך כולל הכנסות של הרשות (אלפי ש"ח) 2009`                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `סך כולל הכנסות של הרשות - אחוז שינוי ראלי 2009 לעומת 2008`              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `סה"כ הכנסות של הרשות מן התקציב הרגיל (אלפי ש"ח) 2009`                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `סה"כ הכנסות של הרשות מן התקציב הרגיל - אחוז שינוי ראלי 2009 לעומת 2008` <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `הכנסות של הרשות מחינוך (אלפי ש"ח) 2009`                                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `הכנסות של הרשות מחינוך - אחוז שינוי ראלי 2009 לעומת 2008`               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `הכנסות של הרשות מרווחה (אלפי ש"ח) 2009`                                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `הכנסות של הרשות מרווחה - אחוז שינוי ראלי 2009 לעומת 2008`               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `הכנסות של הרשות ממפעל המים (אלפי ש"ח) 2009`                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ `הכנסות של הרשות ממפעל המים - אחוז שינוי ראלי 2009 לעומת 2008`           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> …</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matan Hakim.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

